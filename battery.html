<html>

<head>
    <!-- include jquery library ... required in the sample -->
    <!-- <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script> -->
    <script src="assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js">
    </script>

    <!-- include the roslibjs library ... required -->
    <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js">
    </script>



    <script type="text/javascript">
        var ros = new ROSLIB.Ros({
            url: 'ws://localhost:9090' // url to your rosbridge server
            //url: 'ws://192.168.1.2:9090' // url to your rosbridge server
        });

        ros.on('connection', function() {
            console.log('Connected to websocket server.');
        });

        ros.on('error', function(error) {
            console.log('Error connecting to websocket server: ', error);
        });

        ros.on('close', function() {
            console.log('Connection to websocket server closed.');
        });

        var exampleTopic = new ROSLIB.Topic({
            ros: ros,
            name: '/test_topic', // use a sensible namespace
            messageType: 'std_msgs/String' //Create a pose object (geometry_msg(s)/Pose)

        });

        var battery = new ROSLIB.Topic({
            ros: ros,
            name: '* /battery_monitor_node', // use a sensible namespace
            messageType: 'battery_monitor/BatteryStatus' //Create a pose object (geometry_msg(s)/Pose)

        });
        function publishEncoded(topic, obj) {
            var msg = new ROSLIB.Message({

                data: JSON.stringify(obj)
            });
            topic.publish(msg);
        }
        function decodeMessage(msg) {
            return JSON.parse(msg.data);
        }
        battery.subscribe(function(msg) {
            console.log(msg);
            $('#topic_data').text(msg.amps + msg.amp_hours);
            $('#lin1').text(msg.amps);
            $('#lin2').text(msg.amp_hours);



        });

        $(document).ready(function() {
            console.log("Hello there!");
        })
    </script>
</head>

<body>

    <div>Topic data: <span id="topic_data"></span></div>
    <br />
    <br />

    <div>Amps: <span id="lin1"></span></div>
    <div>Amp Hours: <span id="lin2"></span></div>


</body>

</html>
